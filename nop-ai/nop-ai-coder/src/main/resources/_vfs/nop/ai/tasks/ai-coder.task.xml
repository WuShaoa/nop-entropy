<task x:schema="/nop/schema/task/task.xdef" xmlns:x="/nop/schema/xdsl.xdef"
      xmlns:xpl="xpl" xmlns:ai="ai" x:dump="true"
      defaultUseParentScope="true">

    <x:post-extends>
        <ai:GenTaskStep xpl:lib="/nop/ai/xlib/ai.xlib"/>
    </x:post-extends>

    <input name="requirements" type="String" mandatory="true"/>
    <input name="basePackageName" type="class-name" mandatory="true"/>
    <input name="targetDir" type="String" mandatory="true"/>

    <steps>
        <ai:TaskStep name="refineRequirements" ai:promptName="/coder/refine-requirements">
            <description>改进需求文档</description>
            <output name="RESULT" exportAs="requirements"/>
        </ai:TaskStep>

        <ai:TaskStep name="designOrm" ai:promptName="coder/orm-design">
            <description>根据需求文档的描述，设计ORM模型</description>
            <output name="RESULT" exportAs="ormNode"/>
        </ai:TaskStep>

        <xpl name="normalizeOrmModel">
            <source>

            </source>
        </xpl>

        <ai:TaskStep name="refineOrmDesign" ai:promptName="coder/refine-orm-design">
            <description>检查ORM模型与需求文档是否一致，是否需要改进</description>
        </ai:TaskStep>

        <ai:TaskStep name="designMenu" ai:promptName="coder/menu-design">
            <description>根据需求文档的描述，设计菜单和角色权限</description>
        </ai:TaskStep>
    </steps>
</task>